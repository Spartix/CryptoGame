<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Roue du casino</title>
    <style>
      body {
        font-family: Arial, sans-serif;
        margin: 0;
        padding: 0;
      }

      .container {
        width: 100%;
        height: 100vh;
        display: flex;
        justify-content: center;
        align-items: center;
        flex-direction: column;
      }

      .roulette {
        display: flex;
        flex-direction: column;
        align-items: center;
        justify-content: center;
        height: 100vh;

        .wheel img {
          transition: transform 10s cubic-bezier(0.3, 1, 0.7, 1),
            10s filter cubic-bezier(0.1, 1, 0.8, 1),
            10s -webkit-filter cubic-bezier(0.1, 1, 0.8, 1);
          will-change: transform;
          border-radius: 50%;
          box-shadow: 0 0 100px rgba(0, 0, 0, 0.5);
          width: 100%;
          max-width: 600px;
          /* border:4px dashed rgba(255,255,255, .5); */
        }

        .arrow {
          width: 0;
          height: 0;
          border: 80px solid transparent;
          border-top: 110px solid tomato;
          position: fixed;
          left: 50%;
          transform: translate(-50%, -100px);
          z-index: 20;
          border-radius: 0.35em;
        }
      }

      .spin {
        cursor: crosshair;
      }

      .spin {
        cursor: crosshair;
      }
      .launch {
        padding: 10px 20px;
        background-color: #007bff;
        color: #fff;
        border: none;
        border-radius: 4px;
        cursor: pointer;
      }
    </style>
  </head>
  <body>
    <div class="roulette">
      <div class="wheel spin">
        <div class="arrow"></div>
        <img
          src="https://s2.qwant.com/thumbr/0x380/4/9/d3501b261c5a8c75d62f0da8c9ed23b72f31f8b29e70aa9eaac3302251b2b3/roues-r%C3%A9viser-multiplication.png?u=https%3A%2F%2Fi1.wp.com%2Fapprendre-reviser-memoriser.fr%2Fwp-content%2Fuploads%2F2019%2F08%2Froues-r%25C3%25A9viser-multiplication.png%3Fresize%3D830%252C729%26ssl%3D1&q=0&b=1&p=0&a=0"
        />
      </div>
      <button class="launch">Lancer la roue</button>
    </div>
    <script
      src="http://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js"
      type="text/javascript"
    ></script>
    <script>
      perfecthalf = ((1 / 8) * 360) / 2;

      let currentLength = perfecthalf;
      $(".wheel img").css("transform", "rotate(" + perfecthalf + "deg)");

      $(".launch").click(() => {
        //$(".wheel img").css("filter", "blur(8px)");
        division = getRandomInt(1, 2) * 360;
        spininterval = getRandomInt(0, 8) * (360 / 8) + division;
        currentLength += spininterval;

        numofsecs = spininterval;

        console.log((numofsecs - division) / 16);
        $(".wheel img").css("transform", "rotate(" + currentLength + "deg)");

        setTimeout(function () {
          $(".wheel img").css("filter", "blur(0px)");
          $(".wheel img").css("transform", "rotate(" + currentLength + "deg)");
        }, numofsecs);
      });

      function getRandomInt(min, max) {
        return Math.floor(Math.random() * (max - min + 1)) + min;
      }

      $(document).ready(function () {
        $(".spin").click();
      });

      function spinWheel() {
        //   fetch("async-roue", {
        //     method: "POST",
        //   })
        //     .then((response) => response.json())
        //     .then((data) => {
        //       // Simulez un délai avant de montrer le résultat
        //       setTimeout(() => {
        //         alert("Le résultat est " + data.result);
        //       }, 6000); // La durée de transition CSS est de 6 secondes
        //     })
        //     .catch((error) => {
        //       console.error("Erreur:", error);
        //     });
      }
    </script>
  </body>
</html>
