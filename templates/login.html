<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Login Page</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='css/login.css') }}">
    <nav>
      <ul>
        <li><a href="./">Home</a></li>
        <li><a href="./login">Se connecter</a></li>
        <li><a href="./register">S'inscrire</a></li>
        <div class="container_switch">
          <button
            id="theme-toggle"
            onclick="toggleTheme()"
            class="circle"
            onclick="toggleTheme()"
          ></button>
        </div>
      </ul>
    </nav>
  </head>
  <body>
    
    <div class="container">
      <h2>Login</h2>
      <form action="async-login" method="post">
        <input type="email" minlength="8" name="username" placeholder="E-mail" required />
        <input
          type="password"
          minlength="8"
          maxlength="14"
          
          name="password"
          id="password"
          placeholder="Mot De Passe"
          required
        />
        <input type="checkbox" onclick="showPassword()" /> Voir le mot de passe
        <p class="invalid-password" id="invalidPasswordText" hidden>
          Mot de passe invalide
        </p>
        <input type="submit" value="Login" />
      </form>
    </p>
      <a href="./register">Pas de compte ? se creer ici</a>
    </div>

    <script>
      function showPassword() {
        var passwordField = document.getElementById("password");
        if (passwordField.type === "password") {
          passwordField.type = "text";
        } else {
          passwordField.type = "password";
        }
      }
      function isValid(bool) {
        if (window.location.href.includes("?error=true")) {
          document.getElementById("invalidPasswordText").hidden = false;
        }
      }
      isValid();
      var input = document.getElementById('password')
      input.oninvalid = function(event) {event.target.setCustomValidity(`Le mot de passe doit contenir: 
                -Au moins une majuscule (A-Z)
                -Au moins 8 caractère (maximum 14)
                -des chiffres (0-9) 
                -des caratères spéciaux (#?!@$%^&*-)`)}
    </script>
    <script src="{{ url_for('static', filename='js/switch.js') }}"></script>
  </body>
</html>
